{"version":3,"sources":["redux/reducer.js","redux/store.js","components/Header/Header.js","redux/actions.js","components/SearchBox/SearchBox.js","components/MovieItem/MovieItem.js","components/Movies/Movies.js","components/Favorites/Favorites.js","pages/MainPage/MainPage.js","pages/ListPage/ListPage.js","App.js","index.js"],"names":["initialStore","movies","favorites","reducer","state","action","type","moviesList","payload","obj","newFavorites","movie","find","item","imdbID","alert","push","index","anotherFavorites","splice","store","createStore","Header","className","Component","searchMovie","SearchBox","searchLine","searchLineChangeHandler","e","setState","target","value","searchBoxSubmitHandler","preventDefault","fetch","then","res","json","data","console","log","dispatch","Search","this","onSubmit","placeholder","onChange","disabled","MovieItem","props","Title","Year","Poster","addToFavorites","src","alt","onClick","Movies","map","key","functionFromConnect","connect","Favorites","title","link","changeTitle","removeFromFavorites","addNewList","idList","method","headers","body","JSON","stringify","id","to","MainPage","ListPage","match","params","forEach","href","App","path","exact","component","React","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.28402566.chunk.js","sourcesContent":["const initialStore = {\r\n    movies: [],\r\n    favorites: []\r\n}\r\n\r\nfunction reducer(state = initialStore, action) {\r\n    const { favorites } = state;\r\n    switch (action.type) {\r\n        case 'SEARCH_MOVIE':\r\n            const { moviesList } = action.payload;\r\n            return { ...state, movies: moviesList };\r\n            \r\n        case 'ADD_MOVIE_TO_FAVORITES':\r\n            const { obj } = action.payload\r\n            const newFavorites = [...favorites];\r\n            const movie = newFavorites.find(item => item.imdbID === obj.imdbID);\r\n            if (!movie) {\r\n                newFavorites.push(obj);\r\n                return { ...state, favorites: newFavorites, };\r\n                \r\n            } else { \r\n                alert('Этот фильм уже есть в избранном');\r\n                return state;\r\n            }\r\n        case 'REMOVE_FROM_FAVORITES':\r\n            const { index } = action.payload;\r\n            const anotherFavorites = [...favorites];\r\n            anotherFavorites.splice(index, 1);\r\n            return { ...state, favorites: anotherFavorites };\r\n            \r\n        default: return state;\r\n    }\r\n\r\n}\r\n\r\nexport default reducer;","import { createStore } from \"redux\";\r\nimport reducer from './reducer';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React, { Component } from 'react';\r\nimport './Header.css';\r\n\r\nclass Header extends Component {\r\n    render() { \r\n        return (\r\n            <header className=\"header\">\r\n                <h1 className=\"header__title\">\r\n                    MustSee\r\n                </h1>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Header;","\r\nexport function searchMovie(moviesList) {\r\n    return {\r\n        type: 'SEARCH_MOVIE',\r\n        payload: {\r\n          moviesList: moviesList\r\n        }\r\n      }\r\n}\r\n\r\nexport function addToFavorites(obj) {\r\n    return {\r\n        type: 'ADD_MOVIE_TO_FAVORITES',\r\n        payload: {\r\n          obj: obj\r\n        }\r\n      }\r\n}\r\n\r\nexport function removeFromFavorites(index) {\r\n    return {\r\n        type: 'REMOVE_FROM_FAVORITES',\r\n        payload: {\r\n            index: index\r\n        }\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './SearchBox.css';\r\nimport store from '../../redux/store';\r\nimport { searchMovie } from '../../redux/actions';\r\n\r\nclass SearchBox extends Component {\r\n    state = {\r\n        searchLine: ''\r\n    }\r\n    searchLineChangeHandler = (e) => {\r\n        this.setState({ searchLine: e.target.value });\r\n    }\r\n    searchBoxSubmitHandler = (e) => {\r\n        e.preventDefault();\r\n        fetch(`http://www.omdbapi.com/?s=${this.state.searchLine}&apikey=c44e99fe`)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            console.log(data)\r\n            store.dispatch(searchMovie(data.Search))})\r\n    }\r\n    render() {\r\n        const { searchLine } = this.state;\r\n\r\n        return (\r\n            <div className=\"search-box\">\r\n                <form className=\"search-box__form\" onSubmit={this.searchBoxSubmitHandler}>\r\n                    <label className=\"search-box__form-label\">\r\n                        Искать фильм по названию:\r\n                        <input\r\n                            value={searchLine}\r\n                            type=\"text\"\r\n                            className=\"search-box__form-input\"\r\n                            placeholder=\"Например, Shawshank Redemption\"\r\n                            onChange={this.searchLineChangeHandler}\r\n                        />\r\n                    </label>\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"search-box__form-submit\"\r\n                        disabled={!searchLine}\r\n                    >\r\n                        Искать\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default SearchBox;","import React, { Component } from 'react';\r\nimport './MovieItem.css';\r\n\r\nclass MovieItem extends Component {\r\n    render() {\r\n        const { Title, Year, Poster, addToFavorites } = this.props;\r\n        return (\r\n            <article className=\"movie-item\">\r\n                <img className=\"movie-item__poster\" src={Poster} alt={Title} />\r\n                <div className=\"movie-item__info\">\r\n                    <h3 className=\"movie-item__title\">{Title}&nbsp;({Year})</h3>\r\n                    <button type=\"button\" className=\"movie-item__add-button\" onClick={() => addToFavorites(this.props)}>Добавить в список</button>\r\n                </div>\r\n            </article>\r\n        );\r\n    }\r\n}\r\n \r\nexport default MovieItem;","import React, { Component } from 'react';\r\nimport MovieItem from '../MovieItem/MovieItem';\r\nimport './Movies.css';\r\n\r\nimport { addToFavorites } from '../../redux/actions';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Movies extends Component {\r\n    state = { \r\n        movies: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { movies } = this.props;\r\n        this.setState({ movies });\r\n    }\r\n\r\n    addToFavorites = (obj) => {\r\n        this.props.addToFavorites(obj)\r\n    }\r\n\r\n    render() { \r\n        return ( \r\n            <ul className=\"movies\">\r\n                {this.props.movies && this.props.movies.map((movie) => (\r\n                    <li className=\"movies__item\" key={movie.imdbID}>\r\n                        <MovieItem {...movie} addToFavorites={(this.addToFavorites)} />\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\n\r\n \r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      movies: state.movies\r\n    }\r\n  }\r\n  \r\n  const mapDispatchToProps = dispatch => ({\r\n    addToFavorites: (obj) => dispatch(addToFavorites(obj))\r\n  });\r\n  \r\n  const functionFromConnect = connect(mapStateToProps, mapDispatchToProps);\r\n  \r\n  export default functionFromConnect(Movies);","import React, { Component } from 'react';\r\nimport './Favorites.css';\r\nimport { connect } from 'react-redux';\r\nimport { removeFromFavorites } from '../../redux/actions';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nclass Favorites extends Component {\r\n    state = {\r\n        title: 'Новый список',\r\n        movies: [],\r\n        link: ''\r\n    }\r\n\r\n    changeTitle = (e) => {\r\n        this.setState({ title: e.target.value})\r\n    }\r\n\r\n    removeFromFavorites = (index) => {\r\n        this.props.removeFromFavorites(index)\r\n    }\r\n\r\n    addNewList = () => {\r\n        const { title } = this.state;\r\n        const idList = this.props.movies.map(movie => {\r\n            return (movie.imdbID)\r\n        })\r\n        fetch('https://acb-api.algoritmika.org/api/movies/list', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                'title': title,\r\n                'movies': idList\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                this.setState({ link: data.id })\r\n            })\r\n    }\r\n\r\n    render() { \r\n        return (\r\n            <div className=\"favorites\">\r\n                <input value={this.state.title} className=\"favorites__name\" placeholder=\"Новый список\" onChange={this.changeTitle} />\r\n                <ul className=\"favorites__list\">\r\n                    {this.props.movies && this.props.movies.map((item, index) => {\r\n                        return <div className='fav' key={item.imdbID}>\r\n                            <li>{item.Title} ({item.Year})</li>\r\n                            <button className=\"btn-del\" onClick={() => this.removeFromFavorites(index)}>x</button>\r\n                            </div>;\r\n                    })}\r\n                </ul>\r\n                {this.state.link ? \r\n                    <div>\r\n                        <Link to={`/list/${this.state.link}`}>{this.state.title}</Link>\r\n                    </div> : <button type=\"button\" className=\"favorites__save\" onClick={this.addNewList}>Сохранить список</button>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      movies: state.favorites\r\n    }\r\n  }\r\n  \r\n  const mapDispatchToProps = dispatch => ({\r\n    removeFromFavorites: (index) => dispatch(removeFromFavorites(index))\r\n  });\r\n  \r\n  const functionFromConnect = connect(mapStateToProps, mapDispatchToProps);\r\n  \r\n  export default functionFromConnect(Favorites);","import React, { Component } from 'react';\r\nimport './MainPage.css';\r\nimport Header from '../../components/Header/Header';\r\nimport SearchBox from '../../components/SearchBox/SearchBox';\r\nimport Movies from '../../components/Movies/Movies';\r\nimport Favorites from '../../components/Favorites/Favorites';\r\n\r\nclass MainPage extends Component {\r\n    render() { \r\n        return (\r\n            <div className=\"main-page\">\r\n                <Header />\r\n                <main className=\"main-page__content\">\r\n                    <section className=\"main-page__main-section\">\r\n                        <div className=\"main-page__search-box\">\r\n                            <SearchBox />\r\n                        </div>\r\n                        <div className=\"main-page__movies\">\r\n                            <Movies />\r\n                        </div>\r\n                    </section>\r\n                    <aside className=\"main-page__favorites\">\r\n                        <Favorites />\r\n                    </aside>\r\n                </main>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default MainPage;","import React, { Component } from 'react';\r\nimport './ListPage.css';\r\nimport Header from '../../components/Header/Header';\r\n\r\nclass ListPage extends Component {\r\n    state = {\r\n        title: '',\r\n        favorites: []\r\n    }\r\n    componentDidMount() {\r\n        // const state = store.getState();\r\n        // this.setState({ favorites: state.favorites })\r\n        const id = this.props.match.params;\r\n        fetch(`https://acb-api.algoritmika.org/api/movies/list/${id.id}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                this.setState({ title: data.title })\r\n                data.movies.forEach(item => {\r\n                    fetch(`http://www.omdbapi.com/?i=${item}&apikey=c44e99fe`)\r\n                        .then(res => res.json())\r\n                        .then(data => {\r\n                            console.log(data)\r\n                            this.setState({ favorites: [...this.state.favorites, data] })\r\n                            console.log(this.state)\r\n                        })\r\n                })\r\n            })\r\n    }\r\n    render() {\r\n        const { title, favorites } = this.state;\r\n        console.log(favorites)\r\n        return (\r\n            <div>\r\n                <Header />\r\n                <div className=\"list-page\">\r\n                    <h1 className=\"list-page__title\">{title}</h1>\r\n                    <ul>\r\n                        {favorites.map((item) => {\r\n                            return (\r\n                                <li key={item.imdbID}>\r\n                                    <a href={`https://www.imdb.com/title/${item.imdbID}`} target=\"_blank\">{item.Title} ({item.Year})</a>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default ListPage;","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport MainPage from './pages/MainPage/MainPage';\r\nimport ListPage from './pages/ListPage/ListPage';\r\n\r\nimport './reset.css';\r\nimport './common.css';\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"app\">\r\n        <Route path=\"/\" exact component={MainPage} />\r\n        <Route path=\"/list/:id\" exact component={ListPage} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport { Provider } from \"react-redux\";\r\nimport store from './redux/store';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}